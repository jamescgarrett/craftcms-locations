!function t(e,o,n){function i(s,r){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){var o=e[s][1][t];return i(o?o:t)},d,d.exports,t,e,o,n)}return o[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=t("./components/Locations"),a=n(i),s=t("./utils/ApiUtils");n(s);document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof document.querySelector(".locations")&&null!==document.querySelector(".locations")){new a["default"]({data:"http://plugindev.craft.dev/api/craft/locationsplugin/locations",locationContainerClass:"locations-location grid-col--xxs12 grid-col--xs3"})}else alert('You need a container with the class "locations"')})},{"./components/Locations":2,"./utils/ApiUtils":3}],2:[function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(){this.geocoder=new google.maps.Geocoder,this.data=[],this.locations=[],this.settings=null,this.filteredLocations=[],this.form=null;var t={data:null,useCustomFormClasses:!1,searchForm:null,searchInput:null,radiusInput:null,resultsContainerClass:".locations-locations",locationContainerClass:".location",errorsContainerClass:".locations-searchForm-errors",loadingClass:".locations-loading",loadingContent:"LOADING"};arguments[0]&&"object"===u(arguments[0])&&(this.options=d(t,arguments[0])),a.call(this)}function a(){if(this.options.useCustomFormClasses)this.options.searchForm.addEventListener("submit",this.handleSearchSubmit.bind(this));else{var t=document.querySelector(".locations");this.form=t.getElementsByTagName("form")[0],this.form.addEventListener("submit",this.handleSearchSubmit.bind(this))}document.querySelector(this.options.loadingClass).innerHTML=this.options.loadingContent;var e=this;this.data=p["default"].loadData(this.options.data,function(t){e.locations=t.locations,e.settings=t.settings,s.call(e)})}function s(){var t=this;m["default"].findCurrentLocation(this.geocoder,this.settings,this.locations,function(e){for(var o=0;o<e.length;o++)t.filteredLocations.push(t.locations[e[o]]);c.call(t),document.querySelector(t.options.loadingClass).innerHTML=""})}function r(t,e){var o,n=this;o=""===e?this.settings.defaultRadius:e,this.filteredLocations.length=0,document.querySelector(this.options.resultsContainerClass).innerHTML="",m["default"].findLocation(this.geocoder,t,o,this.locations,function(t){for(var e=0;e<t.length;e++)n.filteredLocations.push(n.locations[t[e]]);c.call(n)})}function l(t){switch(""!=document.querySelector(this.options.errorsContainerClass).innerHTML&&(document.querySelector(this.options.errorsContainerClass).innerHTML=""),t){case"empty":var e="<p>You must enter a zip code.</p>";break;case"format":var e="<p>Your zip code doesn't seem correct... Please check it again.</p>";break;default:alert("What happened???")}document.querySelector(this.options.errorsContainerClass).innerHTML=e}function c(){""!=document.querySelector(this.options.errorsContainerClass).innerHTML&&(document.querySelector(this.options.errorsContainerClass).innerHTML="");var t=document.querySelector(this.options.resultsContainerClass);this.filteredLocations.length<1&&(t.innerHTML="<p>"+this.settings.notFoundText+"</p>");for(var e=0;e<this.filteredLocations.length;e++){var o=document.createElement("div");o.className=this.options.locationContainerClass;var n=document.createElement("p"),i=document.createElement("strong"),a=document.createElement("br"),s=document.createElement("br"),r=document.createElement("br"),l=document.createElement("br"),c=document.createElement("a");c.href="http://maps.google.com/?q="+this.filteredLocations[e].address1+" "+this.filteredLocations[e].city+" "+this.filteredLocations[e].state+" "+this.filteredLocations[e].zipCode,c.target="_blank";var d=document.createElement("a");d.href=this.filteredLocations[e].website,d.target="_blank";var u=document.createTextNode(this.filteredLocations[e].name),h=document.createTextNode(this.filteredLocations[e].address1),p=null;""!=this.filteredLocations[e].address2&&(p=document.createTextNode(this.filteredLocations[e].address2));var f=document.createTextNode(this.filteredLocations[e].city+", "),m=document.createTextNode(this.filteredLocations[e].state+" "),g=document.createTextNode(this.filteredLocations[e].zipCode),C=null,L=null;""!=this.filteredLocations[e].phone&&(C=document.createTextNode(this.filteredLocations[e].phone)),""!=this.filteredLocations[e].website&&(L=document.createTextNode(this.filteredLocations[e].website)),o.appendChild(n),n.appendChild(i),i.appendChild(u),n.appendChild(a),n.appendChild(c),c.appendChild(h),null!=p&&(c.appendChild(lbreak),c.appendChild(p)),c.appendChild(s),c.appendChild(f),c.appendChild(m),c.appendChild(g),null!=C&&(n.appendChild(r),n.appendChild(C)),null!=L&&(n.appendChild(l),n.appendChild(d),d.appendChild(L)),t.appendChild(o)}}function d(t,e){var o;for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},h=t("../utils/ApiUtils"),p=n(h),f=t("../utils/GoogleMapsUtils"),m=n(f);i.prototype.handleSearchSubmit=function(t){var e=void 0,o=void 0;this.options.useCustomFormClasses?(e=this.options.searchInput,o=this.options.radiusInput):(e=this.form.getElementsByTagName("input")[0],o=this.form.getElementsByTagName("input")[1]);var n=/^[0-9]{5}(?:-[0-9]{4})?$/.test(e.value),i=/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/.test(e.value);""==e.value?l.call(this,"empty"):n||i?r.call(this,e.value,o.value):l.call(this,"format"),t.preventDefault()},e.exports=i},{"../utils/ApiUtils":3,"../utils/GoogleMapsUtils":4}],3:[function(t,e,o){"use strict";e.exports={loadData:function(t,e){var o=new Request(t,{method:"GET",headers:new Headers({"Content-Type":"application/json"})});fetch(o).then(function(t){return t.json()}).then(function(t){e(t)})["catch"](function(t){throw new Error(t)})}}},{}],4:[function(t,e,o){"use strict";e.exports={findCurrentLocation:function(t,e,o,n){var i=this;navigator.geolocation&&"0"!==e.useGeoLocation?navigator.geolocation.getCurrentPosition(function(t){var a=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n(i.findResults(a,parseInt(e.defaultRadius),o))}):t.geocode({address:e.defaultZip},function(t,a){switch(a){case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:alert("The daily query limit has been reached. Sorry. Try again Tomorrow!");break;case google.maps.GeocoderStatus.OK:n(i.findResults(t[0].geometry.location,parseInt(e.defaultRadius),o));break;case google.maps.GeocoderStatus.ZERO_RESULTS:alert("Address Can't be Found!");break;default:alert("Geocode error:"+a)}})},findLocation:function(t,e,o,n,i){var a=this;t.geocode({address:e},function(t,e){switch(e){case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:alert("The daily query limit has been reached. Sorry. Try again Tomorrow!");break;case google.maps.GeocoderStatus.OK:i(a.findResults(t[0].geometry.location,o,n));break;case google.maps.GeocoderStatus.ZERO_RESULTS:alert("Address Can't be Found!");break;default:alert("Geocode error:"+e)}})},findResults:function(t,e,o){for(var n=this,i=t.lat(),a=t.lng(),s=[],r=0;r<o.length;r++){var l=o[r].latitude,c=o[r].longitude,d=3959*Math.acos(Math.cos(n.toRadian(i))*Math.cos(n.toRadian(l))*Math.cos(n.toRadian(c)-n.toRadian(a))+Math.sin(n.toRadian(i))*Math.sin(n.toRadian(l)));e>d&&s.push(r)}return s},toRadian:function(t){return t*Math.PI/180}}},{}]},{},[1]);
//# sourceMappingURL=app.js.map
